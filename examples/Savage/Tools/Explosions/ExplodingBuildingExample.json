{ "X3D": {
    "encoding":"UTF-8",
    "@profile":"Immersive",
    "@version":"3.0",
    "@xsd:noNamespaceSchemaLocation":"http://www.web3d.org/specifications/x3d-3.0.xsd",
    "JSON schema":"http://www.web3d.org/specifications/x3d-3.3-JSONSchema.json",
    "head": {
        "meta": [
          {
            "@name":"title",
            "@content":"ExplodingBuildingExample.x3d"
          },
          {
            "@name":"description",
            "@content":"A simple exploding structure, experimenting with the \"Hello World\" of explosions - click on the silver chimney to trigger the explosion. This prototype demonstrates a simplified and scalable approach for modeling explosions. Each chunk of geometry inside an Exploder prototype is given initial/final position/orientation. Intermediate heights for each polygon are at the same height as the distance traveled over ground."
          },
          {
            "@name":"creator",
            "@content":"Don Brutzman"
          },
          {
            "@name":"created",
            "@content":"16 September 2002"
          },
          {
            "@name":"modified",
            "@content":"15 April 2011"
          },
          {
            "@name":"reference",
            "@content":"Exploding building schematic layout diagram:"
          },
          {
            "@name":"Image",
            "@content":"ExplodingBuildingLayout.pdf"
          },
          {
            "@name":"Image",
            "@content":"ExplodingBuildingSnapshots.pdf"
          },
          {
            "@name":"Image",
            "@content":"ExplodingBuildingMontage.png"
          },
          {
            "@name":"MovingImage",
            "@content":"ExplodingBuildingExampleVideo.mov"
          },
          {
            "@name":"reference",
            "@content":"ExplodingBuildingLargeExample.wrl"
          },
          {
            "@name":"reference",
            "@content":"Rotation calculations performed using the Dizzy utility from Vapour Technologies by James Smith."
          },
          {
            "@name":"reference",
            "@content":"http://www.vapourtech.com"
          },
          {
            "@name":"reference",
            "@content":"DIS-Java-VRML Working Group"
          },
          {
            "@name":"reference",
            "@content":"http://www.web3d.org/WorkingGroups/vrtp/dis-java-vrml"
          },
          {
            "@name":"identifier",
            "@content":"https://savage.nps.edu/Savage/Tools/Explosions/ExplodingBuildingExample.x3d"
          },
          {
            "@name":"generator",
            "@content":"X3D-Edit 3.2, https://savage.nps.edu/X3D-Edit"
          },
          {
            "@name":"license",
            "@content":"../../license.html"
          },
          {
            "@name":"translated",
            "@content":"19 March 2017"
          },
          {
            "@name":"generator",
            "@content":"X3dToJson.xslt, http://www.web3d.org/x3d/stylesheets/X3dToJson.html"
          },
          {
            "@name":"warning",
            "@content":"An experimental version of X3D JSON encoding is used for this scene.  Status online at http://www.web3d.org/wiki/index.php/X3D_JSON_Encoding"
          }
        ]
    },
    "Scene": {
        "-children":[
          { "ExternProtoDeclare":
            {
              "@name":"Exploder",
              "@appinfo":"Explode contained geometry through animation on demand",
              "@url":["ExplodingBuildingPrototype.x3d#Exploder","https://savage.nps.edu/Savage/Tools/Explosions/ExplodingBuildingPrototype.x3d#Exploder","ExplodingBuildingPrototype.wrl#Exploder","https://savage.nps.edu/Savage/Tools/Explosions/ExplodingBuildingPrototype.wrl#Exploder"],
              "field": [
                {
                  "@name":"geometry",
                  "@accessType":"initializeOnly",
                  "@appinfo":"geometry node, to be used inside a Shape",
                  "@type":"SFNode"
                },
                {
                  "@name":"material",
                  "@accessType":"initializeOnly",
                  "@appinfo":"Material node for this geometry, to be used inside a Shape",
                  "@type":"SFNode"
                },
                {
                  "@name":"initialPosition",
                  "@accessType":"initializeOnly",
                  "@appinfo":"starting point",
                  "@type":"SFVec3f"
                },
                {
                  "@name":"finalPosition",
                  "@accessType":"initializeOnly",
                  "@appinfo":"finish point",
                  "@type":"SFVec3f"
                },
                {
                  "@name":"initialOrientation",
                  "@accessType":"initializeOnly",
                  "@appinfo":"starting point orientation",
                  "@type":"SFRotation"
                },
                {
                  "@name":"finalOrientation",
                  "@accessType":"initializeOnly",
                  "@appinfo":"finish point orientation",
                  "@type":"SFRotation"
                },
                {
                  "@name":"set_fraction",
                  "@accessType":"inputOnly",
                  "@appinfo":"animation input",
                  "@type":"SFFloat"
                }
              ]
            }
          },
          {
            "#comment":"Root Transform will be replaced by EspduTransfor when ready to network"
          },
          { "Transform":
            {
              "@DEF":"RootEspduTransform",
              "-children":[
                { "Viewpoint":
                  {
                    "@description":"Hello Exploding Building",
                    "@orientation":[1,0,0,-0.3],
                    "@position":[1,20,50]
                  }
                },
                { "DirectionalLight":
                  {
                    "@direction":[-0.57735,-0.57735,0.57735]
                  }
                },
                { "Transform":
                  {
                    "@scale":[10,10,10],
                    "-children":[
                      { "Inline":
                        {
                          "@DEF":"CoordinateAxes",
                          "@url":["../../Tools/Authoring/CoordinateAxes.x3d","../../../X3dForWebAuthors/Chapter03-Grouping/CoordinateAxes.x3d","http://X3dGraphics.com/examples/X3dForWebAuthors/Chapter03-Grouping/CoordinateAxes.x3d","https://savage.nps.edu/Savage/Tools/Authoring/CoordinateAxes.x3d","../../Tools/Authoring/CoordinateAxes.wrl","../../../X3dForWebAuthors/Chapter03-Grouping/CoordinateAxes.wrl","https://savage.nps.edu/Savage/Tools/Authoring/CoordinateAxes.wrl","http://X3dGraphics.com/examples/X3dForWebAuthors/Chapter03-Grouping/CoordinateAxes.wrl"]
                        }
                      }
                    ]
                  }
                },
                { "Shape":
                  {
                    "-geometry":
                      { "Box":
                        {
                          "@DEF":"Floor",
                          "@size":[14,0.1,8]
                        }
                      },
                    "-appearance":
                      { "Appearance":
                        {
                          "-material":
                            { "Material":
                              {
                                "@DEF":"FloorMaterial",
                                "@diffuseColor":[0,0.3,0.3],
                                "@transparency":0.3
                              }
                            }
                        }
                      }
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"FirstFloorCeiling",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"Floor"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"FloorMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,3,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[14,0.05,14]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.48,0,0.88,3.14]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"FirstFloorWallEast",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@DEF":"LongWall",
                              "@size":[14,3,0.1]
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@DEF":"FirstFloorWallMaterial",
                              "@diffuseColor":[0.4,0.4,0],
                              "@transparency":0.3
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,1.5,3.95]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[0,0.05,10]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.96,0.2,-0.19,1.61]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"FirstFloorWallNorth",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@DEF":"ShortWall",
                              "@size":[0.1,3,8]
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"FirstFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[7,1.5,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[15,0.05,2]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0,0,1,-1.57]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"FirstFloorWallWest",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"LongWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"FirstFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,1.5,-3.95]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[0,0.05,-12]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.96,0.2,-0.19,1.61]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"FirstFloorWallSouth",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"ShortWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"FirstFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[-7,1.5,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[-10,0.05,1]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[-0.32,-0.32,0.89,1.69]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"SecondFloorCeiling",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"Floor"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"FloorMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,6,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[-12,0.05,-10]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.84,0,0.54,3.14]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"SecondFloorWallEast",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"LongWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@DEF":"SecondFloorWallMaterial",
                              "@diffuseColor":[0.8,0.8,0],
                              "@transparency":0.3
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,4.5,3.95]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[5,0.05,20]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.89,-0.32,0.32,1.69]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"SecondFloorWallNorth",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"ShortWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"SecondFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[7,4.5,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[22,0.05,-6]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[-0.32,-0.32,0.89,1.69]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"SecondFloorWallWest",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"LongWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"SecondFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[0,4.5,-3.95]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[5,0.05,-19]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[0.96,0.2,-0.19,1.61]
                      }
                    ]
                  }
                },
                { "ProtoInstance":
                  {
                    "@name":"Exploder",
                    "@DEF":"SecondFloorWallSouth",
                    "fieldValue": [
                      {
                        "@name":"geometry",
                        "-children":[
                          { "Box":
                            {
                              "@USE":"ShortWall"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"material",
                        "-children":[
                          { "Material":
                            {
                              "@USE":"SecondFloorWallMaterial"
                            }
                          }
                        ]
                      },
                      {
                        "@name":"initialPosition",
                        "@value":[-7,4.5,0]
                      },
                      {
                        "@name":"finalPosition",
                        "@value":[-10,0.05,11]
                      },
                      {
                        "@name":"finalOrientation",
                        "@value":[-0.28,0.28,-0.92,1.66]
                      }
                    ]
                  }
                },
                { "Group":
                  {
                    "-children":[
                      { "ProtoInstance":
                        {
                          "@name":"Exploder",
                          "@DEF":"SmokeStack",
                          "fieldValue": [
                            {
                              "@name":"geometry",
                              "-children":[
                                { "Cylinder":
                                  {
                                    "@bottom":false,
                                    "@height":9,
                                    "@radius":0.5
                                  }
                                }
                              ]
                            },
                            {
                              "@name":"material",
                              "-children":[
                                { "Material":
                                  {
                                    "@diffuseColor":[0.4,0.4,0.4],
                                    "@shininess":0.8
                                  }
                                }
                              ]
                            },
                            {
                              "@name":"initialPosition",
                              "@value":[-4,4.51,2]
                            },
                            {
                              "@name":"finalPosition",
                              "@value":[-15,0.4,2]
                            },
                            {
                              "@name":"finalOrientation",
                              "@value":[0,0,1,1.57]
                            }
                          ]
                        }
                      },
                      { "TouchSensor":
                        {
                          "@DEF":"SmokeStackTouch",
                          "@description":"touch to activate"
                        }
                      }
                    ]
                  }
                },
                { "TimeSensor":
                  {
                    "@DEF":"ExplosionClock"
                  }
                }
              ]
            }
          },
          { "ROUTE":
            {
              "@fromField":"touchTime",
              "@fromNode":"SmokeStackTouch",
              "@toField":"set_startTime",
              "@toNode":"ExplosionClock"
            }
          },
          {
            "#comment":"Connect clock to animations"
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"FirstFloorCeiling"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"FirstFloorWallEast"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"FirstFloorWallNorth"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"FirstFloorWallWest"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"FirstFloorWallSouth"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SecondFloorCeiling"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SecondFloorWallEast"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SecondFloorWallNorth"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SecondFloorWallWest"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SecondFloorWallSouth"
            }
          },
          { "ROUTE":
            {
              "@fromField":"fraction_changed",
              "@fromNode":"ExplosionClock",
              "@toField":"set_fraction",
              "@toNode":"SmokeStack"
            }
          }
        ]
    }
  }
}