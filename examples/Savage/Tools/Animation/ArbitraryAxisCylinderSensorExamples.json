{ "X3D": {
    "encoding":"UTF-8",
    "@profile":"Immersive",
    "@version":"3.0",
    "@xsd:noNamespaceSchemaLocation":"http://www.web3d.org/specifications/x3d-3.0.xsd",
    "JSON schema":"http://www.web3d.org/specifications/x3d-3.3-JSONSchema.json",
    "head": {
        "meta": [
          {
            "@name":"title",
            "@content":"ArbitraryAxisCylinderSensorExamples.x3d"
          },
          {
            "@name":"description",
            "@content":"Modified CylinderSensor oriented about an arbitrary axis, relative to peer/child geometry that remains oriented to its original axis. Select and drag each object to rotate. Originally authored by Don Brutzman's MV4204 class, with modifications by Maj James Breitinger USMC to include min/max angles of rotation and object center. Motivation: Modify example shown by Chapter 9 Figure 7 to build a PROTO for a CylinderSensor oriented about an arbitrary axis."
          },
          {
            "@name":"warning",
            "@content":"ArbitraryAxisCylinderSensor operates on its children, NOT on its peers. This variation is necessary in order to accomplish the desired Transform rotation to a new orientation axis."
          },
          {
            "@name":"creator",
            "@content":"Don Brutzman"
          },
          {
            "@name":"created",
            "@content":"1 October 1998"
          },
          {
            "@name":"modified",
            "@content":"22 December 2014"
          },
          {
            "@name":"Image",
            "@content":"ArbitraryAxisCylinderSensorExamples.png"
          },
          {
            "@name":"reference",
            "@content":"ArbitraryAxisCylinderSensorPrototype.x3d"
          },
          {
            "@name":"reference",
            "@content":"ArbitraryAxisCylinderSensorExampleOriginal.wrl"
          },
          {
            "@name":"identifier",
            "@content":"https://savage.nps.edu/Savage/Tools/Animation/ArbitraryAxisCylinderSensorExamples.x3d"
          },
          {
            "@name":"reference",
            "@content":"The VRML 2.0 Sourcebook"
          },
          {
            "@name":"generator",
            "@content":"X3D-Edit 3.2, https://savage.nps.edu/X3D-Edit"
          },
          {
            "@name":"license",
            "@content":"../../license.html"
          },
          {
            "@name":"translated",
            "@content":"19 March 2017"
          },
          {
            "@name":"generator",
            "@content":"X3dToJson.xslt, http://www.web3d.org/x3d/stylesheets/X3dToJson.html"
          },
          {
            "@name":"warning",
            "@content":"An experimental version of X3D JSON encoding is used for this scene.  Status online at http://www.web3d.org/wiki/index.php/X3D_JSON_Encoding"
          }
        ]
    },
    "Scene": {
        "-children":[
          { "ExternProtoDeclare":
            {
              "@name":"ArbitraryAxisCylinderSensor",
              "@appinfo":"Modified CylinderSensor with children nodes oriented about an arbitrary axis. Warning: ArbitraryAxisCylinderSensor affects children, not peers.",
              "@url":["../../../Savage/Tools/Animation/ArbitraryAxisCylinderSensorPrototype.x3d#ArbitraryAxisCylinderSensor","https://savage.nps.edu/Savage/Tools/Animation/ArbitraryAxisCylinderSensorPrototype.x3d#ArbitraryAxisCylinderSensor","../../../Savage/Tools/Animation/ArbitraryAxisCylinderSensorPrototype.wrl#ArbitraryAxisCylinderSensor","https://savage.nps.edu/Savage/Tools/Animation/ArbitraryAxisCylinderSensorPrototype.wrl#ArbitraryAxisCylinderSensor"],
              "field": [
                {
                  "@name":"shiftRotationAxis",
                  "@accessType":"initializeOnly",
                  "@appinfo":"shifted axis of rotation from local vertical, default 1 0 0 0",
                  "@type":"SFRotation"
                },
                {
                  "@name":"center",
                  "@accessType":"initializeOnly",
                  "@appinfo":"local center for axis of rotation, default 0 0 0",
                  "@type":"SFVec3f"
                },
                {
                  "@name":"showCylinderSensorShape",
                  "@accessType":"initializeOnly",
                  "@appinfo":"whether to show visualization shape to show orientation and cylindrical mapping of mouse movements by sensor, default true",
                  "@type":"SFBool"
                },
                {
                  "@name":"scaleCylinderSensorShape",
                  "@accessType":"inputOutput",
                  "@appinfo":"scale for visualization shape, default 1 1 1",
                  "@type":"SFVec3f"
                },
                {
                  "@name":"colorCylinderSensorShape",
                  "@accessType":"inputOutput",
                  "@appinfo":"color for visualization shape, default 0.9 0.9 0.4",
                  "@type":"SFColor"
                },
                {
                  "@name":"transparencyCylinderSensorShape",
                  "@accessType":"inputOutput",
                  "@appinfo":"transparency for visualization shape",
                  "@type":"SFFloat"
                },
                {
                  "@name":"children",
                  "@accessType":"inputOutput",
                  "@appinfo":"children nodes affected by ArbitraryAxisCylinderSensor",
                  "@type":"MFNode"
                },
                {
                  "@name":"autoOffset",
                  "@accessType":"inputOutput",
                  "@appinfo":"determines whether previous offset values are remembered/accumulated, default true",
                  "@type":"SFBool"
                },
                {
                  "@name":"description",
                  "@accessType":"inputOutput",
                  "@appinfo":"Text tooltip displayed for user interaction",
                  "@type":"SFString"
                },
                {
                  "@name":"diskAngle",
                  "@accessType":"inputOutput",
                  "@appinfo":"diskAngle 0 forces disk-like behavior, diskAngle 1.57 (90 degrees) forces cylinder-like behavior, default 0.262, range [0,pi/2]",
                  "@type":"SFFloat"
                },
                {
                  "@name":"enabled",
                  "@accessType":"inputOutput",
                  "@appinfo":"enables/disables node operation, default true",
                  "@type":"SFBool"
                },
                {
                  "@name":"minAngle",
                  "@accessType":"inputOutput",
                  "@appinfo":"clamps rotation_changed events, default 0, range [-2pi,2pi]",
                  "@type":"SFFloat"
                },
                {
                  "@name":"maxAngle",
                  "@accessType":"inputOutput",
                  "@appinfo":"clamps rotation_changed events, default -1, range [-2pi,2pi]",
                  "@type":"SFFloat"
                },
                {
                  "@name":"offset",
                  "@accessType":"initializeOnly",
                  "@appinfo":"sends event and remembers last value sensed, default 0, range (-infinity,infinity)",
                  "@type":"SFFloat"
                },
                {
                  "@name":"isActive",
                  "@accessType":"outputOnly",
                  "@appinfo":"output event isActive=true when primary mouse button is pressed, output event isActive=false when released.",
                  "@type":"SFBool"
                },
                {
                  "@name":"rotation_changed",
                  "@accessType":"outputOnly",
                  "@appinfo":"rotation_changed events equal sum of relative bearing changes plus offset value about Y-axis in local coordinate system",
                  "@type":"SFRotation"
                },
                {
                  "@name":"trackPoint_changed",
                  "@accessType":"outputOnly",
                  "@appinfo":"trackPoint_changed events give intersection point of bearing with sensor's virtual geometry",
                  "@type":"SFVec3f"
                }
              ]
            }
          },
          { "Viewpoint":
            {
              "@description":"ArbitraryAxisCylinderSensor Examples"
            }
          },
          { "Group":
            {
              "-children":[
                {
                  "#comment":"Leftmost shape is red with ArbitraryAxisCylinderSensor oriented around X-axis"
                },
                { "Transform":
                  {
                    "@DEF":"Example1-Cylinder",
                    "@translation":[-3,2,0],
                    "-children":[
                      { "ProtoInstance":
                        {
                          "@name":"ArbitraryAxisCylinderSensor",
                          "-children":[
                            {
                              "#comment":"rotate yAxis to xAxis"
                            }
                          ],
                          "fieldValue": [
                            {
                              "@name":"shiftRotationAxis",
                              "@value":[0,0,1,-1.5707963]
                            },
                            {
                              "@name":"children",
                              "-children":[
                                { "Shape":
                                  {
                                    "-geometry":
                                      { "Cylinder":
                                        {
                                        }
                                      },
                                    "-appearance":
                                      { "Appearance":
                                        {
                                          "-material":
                                            { "Material":
                                              {
                                                "@diffuseColor":[1,0,0]
                                              }
                                            }
                                        }
                                      }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "#comment":"Middle shape is green with ordinary CylinderSensor oriented around Y-axis"
                },
                { "Group":
                  {
                    "@DEF":"Example2-Box",
                    "-children":[
                      { "Transform":
                        {
                          "@DEF":"MiddleTransformY",
                          "@translation":[0,2,0],
                          "-children":[
                            { "Shape":
                              {
                                "-geometry":
                                  { "Box":
                                    {
                                    }
                                  },
                                "-appearance":
                                  { "Appearance":
                                    {
                                      "-material":
                                        { "Material":
                                          {
                                            "@diffuseColor":[0,1,0]
                                          }
                                        }
                                    }
                                  }
                              }
                            },
                            { "CylinderSensor":
                              {
                                "@DEF":"SensorMiddleTransformY",
                                "@description":"Select and drag regular CylinderSensor to rotate"
                              }
                            },
                            { "ROUTE":
                              {
                                "@fromField":"rotation_changed",
                                "@fromNode":"SensorMiddleTransformY",
                                "@toField":"rotation",
                                "@toNode":"MiddleTransformY"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "#comment":"Rightmost shape blue with ArbitraryAxisCylinderSensor oriented around Z-axis"
                },
                { "Transform":
                  {
                    "@DEF":"Example3-Cone",
                    "@translation":[3,2,0],
                    "-children":[
                      { "ProtoInstance":
                        {
                          "@name":"ArbitraryAxisCylinderSensor",
                          "-children":[
                            {
                              "#comment":"rotate yAxis to zAxis"
                            }
                          ],
                          "fieldValue": [
                            {
                              "@name":"shiftRotationAxis",
                              "@value":[1,0,0,1.5707963]
                            },
                            {
                              "@name":"children",
                              "-children":[
                                { "Shape":
                                  {
                                    "-geometry":
                                      { "Cone":
                                        {
                                        }
                                      },
                                    "-appearance":
                                      { "Appearance":
                                        {
                                          "-material":
                                            { "Material":
                                              {
                                                "@diffuseColor":[0,0,1]
                                              }
                                            }
                                        }
                                      }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "#comment":"bottom white shape shows use of ArbitraryAxisCylinderSensor center field"
                },
                { "Transform":
                  {
                    "@DEF":"Example4-Cone",
                    "@translation":[-3.5,-1,0],
                    "-children":[
                      { "ProtoInstance":
                        {
                          "@name":"ArbitraryAxisCylinderSensor",
                          "-children":[
                            {
                              "#comment":"rotate yAxis to zAxis"
                            },
                            {
                              "#comment":"rotate yAxis halfway to xAxis"
                            }
                          ],
                          "fieldValue": [
                            {
                              "@name":"shiftRotationAxis",
                              "@value":[0,0,1,-0.785]
                            },
                            {
                              "@name":"center",
                              "@value":[0,-2,0]
                            },
                            {
                              "@name":"showCylinderSensorShape",
                              "@value":true
                            },
                            {
                              "@name":"scaleCylinderSensorShape",
                              "@value":[1,2,1]
                            },
                            {
                              "@name":"colorCylinderSensorShape",
                              "@value":[0.4,0.9,0.9]
                            },
                            {
                              "@name":"transparencyCylinderSensorShape",
                              "@value":0.4
                            },
                            {
                              "@name":"description",
                              "@value":"Select and drag to rotate"
                            },
                            {
                              "@name":"children",
                              "-children":[
                                { "Shape":
                                  {
                                    "-geometry":
                                      { "Cone":
                                        {
                                        }
                                      },
                                    "-appearance":
                                      { "Appearance":
                                        {
                                          "-material":
                                            { "Material":
                                              {
                                                "@diffuseColor":[1,1,1]
                                              }
                                            }
                                        }
                                      }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "#comment":"Finally some explanation text. Try setting showIcon to true."
                },
                { "Transform":
                  {
                    "@DEF":"Example5-Text",
                    "@translation":[1.8,-1.5,0],
                    "-children":[
                      { "ProtoInstance":
                        {
                          "@name":"ArbitraryAxisCylinderSensor",
                          "-children":[
                            {
                              "#comment":"rotate yAxis to zAxis"
                            },
                            {
                              "#comment":"rotate yAxis halfway to -xAxis"
                            }
                          ],
                          "fieldValue": [
                            {
                              "@name":"shiftRotationAxis",
                              "@value":[0,0,1,0.785]
                            },
                            {
                              "@name":"center",
                              "@value":[0,0,0]
                            },
                            {
                              "@name":"showCylinderSensorShape",
                              "@value":false
                            },
                            {
                              "@name":"scaleCylinderSensorShape",
                              "@value":[0.05,2,0.05]
                            },
                            {
                              "@name":"colorCylinderSensorShape",
                              "@value":[1,1,1]
                            },
                            {
                              "@name":"transparencyCylinderSensorShape",
                              "@value":0.9
                            },
                            {
                              "@name":"children",
                              "-children":[
                                { "Shape":
                                  {
                                    "-appearance":
                                      { "Appearance":
                                        {
                                          "-material":
                                            { "Material":
                                              {
                                                "@diffuseColor":[0,1,1],
                                                "@emissiveColor":[0,1,1]
                                              }
                                            }
                                        }
                                      },
                                    "-geometry":
                                      { "Text":
                                        {
                                          "@string":["ArbitraryAxisCylinderSensor","Examples"],
                                          "-fontStyle":
                                            { "FontStyle":
                                              {
                                                "@justify":["MIDDLE","MIDDLE"],
                                                "@size":0.6
                                              }
                                            }
                                        }
                                      }
                                  }
                                },
                                { "Shape":
                                  {
                                    "-geometry":
                                      { "Box":
                                        {
                                          "@size":[6.4,1.4,0.05]
                                        }
                                      },
                                    "-appearance":
                                      { "Appearance":
                                        {
                                          "-material":
                                            { "Material":
                                              {
                                                "@transparency":1
                                              }
                                            }
                                        }
                                      }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
    }
  }
}